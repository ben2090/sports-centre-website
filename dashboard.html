<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- Navigation Bar -->
    <nav>
        <h2>Welcome, <span id="username">User</span>!</h2>
        <div class="nav-buttons">
            <button onclick="toggleDarkMode()">🌙 Toggle Dark Mode</button>
            <button id="logout">🚪 Logout</button>
        </div>
    </nav>

    <!-- Profile Section -->
    <div class="profile-card">
        <h3>Your Profile</h3>
        <img id="profilePic" src="img/default-profile.png" alt="Profile Picture">
        <p><strong>Name:</strong> <span id="profileName">User Name</span></p>
        <p><strong>Email:</strong> <span id="profileEmail">user@example.com</span></p>
        <input type="file" id="uploadProfilePic" style="display: none;" accept="image/*" onchange="updateProfilePic(event)">
        <button onclick="document.getElementById('uploadProfilePic').click();">Change Picture</button>
        <button onclick="editProfile()">Edit Profile</button>
    </div>

    <!-- Training Schedule -->
    <div class="dashboard-content">
        <h3>Your Sports Activities</h3>
        <ul>
            <li>🏀 <strong>Basketball Training</strong>: Monday & Wednesday</li>
            <li>⚽ <strong>Football Training</strong>: Tuesday & Thursday</li>
            <li>🎾 <strong>Tennis Training</strong>: Saturday</li>
        </ul>
    </div>

    <!-- Training Progress -->
    <div class="progress-container">
        <h3>Training Progress</h3>
        <div class="progress-bar">
            <div class="progress" id="trainingProgress" style="width: 70%;">70%</div>
        </div>
    </div>

    <footer>
        <p>&copy; <span id="year"></span> Sports Center. All Rights Reserved.</p>
    </footer>

    <!-- Firebase Authentication Script -->
    <script type="module">
        // Import Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } 
            from "https://www.gstatic.com/firebasejs/11.5.0/firebase-auth.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC8dAA_ZyImM1E3-GfZgOBH-9i-d6pBh0U",
            authDomain: "webproject-5f201.firebaseapp.com",
            projectId: "webproject-5f201",
            storageBucket: "webproject-5f201.appspot.com",
            messagingSenderId: "397580939787",
            appId: "1:397580939787:web:295411bd00d94456584d0e"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Check if user is logged in
        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById("profileName").innerText = user.displayName || "User";
                document.getElementById("profileEmail").innerText = user.email;
                document.getElementById("username").innerText = user.displayName || "User";
            } else {
                // Redirect to login if not authenticated
                window.location.href = "login.html";
            }
        });

        // Logout function
        document.getElementById("logout").addEventListener("click", () => {
            signOut(auth).then(() => {
                window.location.href = "login.html";
            }).catch((error) => {
                console.error("Logout Error:", error);
            });
        });

        // Set current year in footer
        document.getElementById("year").innerText = new Date().getFullYear();
    </script>

</body>
    </html>
